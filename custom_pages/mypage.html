<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Jack's Blog | Jack's Blog</title><meta name="author" content="Jack"><meta name="copyright" content="Jack"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="经典坦克大战 (1985复刻版) 	     	        body { 	            background-color: #202020; 	            color: #fff; 	            font-family: &#39;Courier New&#39;, Courier, monospace;">
<meta property="og:type" content="website">
<meta property="og:title" content="Jack&#39;s Blog">
<meta property="og:url" content="https://vinstar1.github.io/custom_pages/mypage.html">
<meta property="og:site_name" content="Jack&#39;s Blog">
<meta property="og:description" content="经典坦克大战 (1985复刻版) 	     	        body { 	            background-color: #202020; 	            color: #fff; 	            font-family: &#39;Courier New&#39;, Courier, monospace;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://vinstar1.github.io/img/butterfly-icon.png">
<meta property="article:published_time" content="2026-02-05T11:06:29.471Z">
<meta property="article:modified_time" content="2026-02-05T11:06:29.471Z">
<meta property="article:author" content="Jack">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://vinstar1.github.io/img/butterfly-icon.png"><script type="application/ld+json"></script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://vinstar1.github.io/custom_pages/mypage.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Jack\'s Blog',
  isHighlightShrink: false,
  isToc: false,
  pageType: 'page'
}</script><meta name="generator" content="Hexo 8.1.1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/woshipm-archive/"><i class="fa-fw fas fa-book"></i><span> Woshipm Archive</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-home-page" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Jack's Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/woshipm-archive/"><i class="fa-fw fas fa-book"></i><span> Woshipm Archive</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="page-site-info"><h1 id="site-title"></h1></div></header><main class="layout" id="content-inner"><div id="page"><div class="container" id="article-container">	<!DOCTYPE html>
	<html lang="zh-CN">
	<head>
	    <meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	    <title>经典坦克大战 (1985复刻版)</title>
	    <style>
	        body {
	            background-color: #202020;
	            color: #fff;
	            font-family: 'Courier New', Courier, monospace;
	            display: flex;
	            flex-direction: column;
	            align-items: center;
	            justify-content: center;
	            height: 100vh;
	            margin: 0;
	            overflow: hidden;
	        }
	        #game-container {
	            position: relative;
	            border: 4px solid #666;
	            box-shadow: 0 0 20px #000;
	        }
	        canvas {
	            display: block;
	            background-color: #000;
	        }
	        #ui {
	            display: flex;
	            justify-content: space-between;
	            width: 520px; /* Canvas width + padding */
	            margin-bottom: 10px;
	            font-weight: bold;
	            font-size: 18px;
	        }
	        .info-box {
	            background: #333;
	            padding: 5px 10px;
	            border: 1px solid #555;
	        }
	        #start-screen {
	            position: absolute;
	            top: 0;
	            left: 0;
	            width: 100%;
	            height: 100%;
	            background: rgba(0, 0, 0, 0.85);
	            display: flex;
	            flex-direction: column;
	            justify-content: center;
	            align-items: center;
	            z-index: 10;
	        }
	        button {
	            background: #d32f2f;
	            color: white;
	            border: 2px solid #fff;
	            padding: 10px 20px;
	            font-size: 20px;
	            cursor: pointer;
	            font-family: inherit;
	            text-transform: uppercase;
	        }
	        button:hover {
	            background: #b71c1c;
	        }
	        .controls-hint {
	            margin-top: 15px;
	            font-size: 12px;
	            color: #aaa;
	        }
	    </style>
	</head>
	<body>
	    <div id="ui">
	        <div class="info-box">敌军剩余: <span id="enemy-count">20</span></div>
	        <div class="info-box">玩家生命: <span id="lives">3</span></div>
	        <div class="info-box">关卡: 1</div>
	    </div>
	    <div id="game-container">
	        <canvas id="gameCanvas" width="520" height="520"></canvas>
	        <div id="start-screen">
	            <h1 style="color: #ffcc00; text-shadow: 2px 2px #d32f2f;">BATTLE CITY</h1>
	            <button onclick="startGame()">开始游戏</button>
	            <div class="controls-hint">WASD 或 方向键移动 | 空格键 射击</div>
	        </div>
	    </div>
	    <script>
	        const canvas = document.getElementById("gameCanvas");
	        const ctx = canvas.getContext("2d");
	        const startScreen = document.getElementById("start-screen");
	        const enemyDisplay = document.getElementById("enemy-count");
	        const livesDisplay = document.getElementById("lives");
	        // 游戏常量 (致敬FC原版)
	        const TILE_SIZE = 20; // 每个格子大小
	        const ROWS = 26;
	        const COLS = 26;
	        const PLAYER_SPEED = 2;
	        const BULLET_SPEED = 4;
	        const ENEMY_SPEED = 1.5;
	        // 游戏状态
	        let gameInterval;
	        let isGameOver = false;
	        let keys = {};
	        let player;
	        let enemies = [];
	        let bullets = [];
	        let particles = []; // 爆炸效果
	        let map = [];
	        let lives = 3;
	        let enemiesToSpawn = 20;
	        let spawnTimer = 0;
	        let baseActive = true; // 老鹰是否存活
	        // 0:空, 1:砖, 2:钢, 3:草(不阻挡子弹但遮挡视线-这里简化为只阻挡移动), 4:水, 9:老鹰
	        // 模拟经典第一关地图
	        const LEVEL_1_MAP = [
	            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
	            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
	            [0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0],
	            [0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0],
	            [0,1,1,0,0,1,1,0,0,1,1,2,2,1,1,0,0,1,1,0,0,1,1,0,0,0],
	            [0,1,1,0,0,1,1,0,0,1,1,2,2,1,1,0,0,1,1,0,0,1,1,0,0,0],
	            [0,1,1,0,0,1,1,2,2,1,1,2,2,1,1,2,2,1,1,0,0,1,1,0,0,0],
	            [0,1,1,0,0,1,1,2,2,1,1,2,2,1,1,2,2,1,1,0,0,1,1,0,0,0],
	            [0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0],
	            [0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0],
	            [0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0],
	            [0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0],
	            [0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0],
	            [0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0],
	            [0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0],
	            [0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0],
	            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
	            [0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0],
	            [0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0],
	            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
	            [0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0],
	            [0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0],
	            [0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],
	            [0,0,0,0,0,0,0,0,0,1,1,9,9,1,1,0,0,0,0,0,0,0,0,0,0,0],
	            [0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],
	            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
	        ];
	        // 基础类
	        class Rect {
	            constructor(x, y, w, h) {
	                this.x = x;
	                this.y = y;
	                this.w = w;
	                this.h = h;
	            }
	            intersects(other) {
	                return this.x < other.x + other.w &&
	                       this.x + this.w > other.x &&
	                       this.y < other.y + other.h &&
	                       this.y + this.h > other.y;
	            }
	        }
	        class Bullet extends Rect {
	            constructor(x, y, dir, owner) {
	                super(x, y, 6, 6); // 子弹大小
	                this.dir = dir; // 0:上, 1:右, 2:下, 3:左
	                this.owner = owner; // 'player' or 'enemy'
	                this.speed = BULLET_SPEED;
	                // 修正子弹初始位置到坦克中心
	                if (dir === 0) this.x += 7;
	                if (dir === 1) this.x += 14;
	                if (dir === 2) this.x += 7; this.y += 14;
	                if (dir === 3) this.y += 7;
	            }
	            update() {
	                if (this.dir === 0) this.y -= this.speed;
	                if (this.dir === 1) this.x += this.speed;
	                if (this.dir === 2) this.y += this.speed;
	                if (this.dir === 3) this.x -= this.speed;
	                // 边界检查
	                if (this.x < 0 || this.x > canvas.width || this.y < 0 || this.y > canvas.height) {
	                    return false; // 移除
	                }
	                return true; // 保留
	            }
	            draw() {
	                ctx.fillStyle = "#fff";
	                ctx.fillRect(this.x, this.y, this.w, this.h);
	            }
	        }
	        class Tank extends Rect {
	            constructor(x, y, color, type) {
	                super(x, y, TILE_SIZE - 2, TILE_SIZE - 2); // 稍微小一点方便穿过
	                this.color = color;
	                this.type = type; // 'player' or 'enemy'
	                this.dir = 0; // 0:上, 1:右, 2:下, 3:左
	                this.speed = type === 'player' ? PLAYER_SPEED : ENEMY_SPEED;
	                this.cooldown = 0;
	                this.moving = false;
	                this.life = 1;
	            }
	            draw() {
	                // 简单的像素风格坦克绘制
	                ctx.fillStyle = this.color;
	                // 旋转逻辑：为了简单，我们只是画矩形和炮管
	                // 计算炮管位置
	                let gunX = this.x, gunY = this.y, gunW = 4, gunH = 8;
	                let bodyX = this.x, bodyY = this.y, bodyW = this.w, bodyH = this.h;
	                // 中心调整
	                const cx = this.x + this.w/2;
	                const cy = this.y + this.h/2;
	                ctx.save();
	                ctx.translate(cx, cy);
	                ctx.rotate(this.dir * 90 * Math.PI / 180);
	                // 画车身
	                ctx.fillStyle = this.color;
	                ctx.fillRect(-10, -10, 20, 20);
	                // 履带
	                ctx.fillStyle = "#333"; // 履带深色
	                ctx.fillRect(-12, -10, 2, 20); // 左
	                ctx.fillRect(10, -10, 2, 20);  // 右
	                // 炮管
	                ctx.fillStyle = "#ccc";
	                ctx.fillRect(-2, -16, 4, 10); 
	                // 中心盖
	                ctx.fillStyle = this.color === "#f0e68c" ? "#d4af37" : "#fff";
	                ctx.beginPath();
	                ctx.arc(0, 0, 5, 0, Math.PI*2);
	                ctx.fill();
	                ctx.restore();
	            }
	            move(dir, allTanks) {
	                this.dir = dir;
	                this.moving = true;
	                let nextX = this.x;
	                let nextY = this.y;
	                if (dir === 0) nextY -= this.speed;
	                if (dir === 1) nextX += this.speed;
	                if (dir === 2) nextY += this.speed;
	                if (dir === 3) nextX -= this.speed;
	                // 边界碰撞
	                if (nextX < 0 || nextX + this.w > canvas.width || nextY < 0 || nextY + this.h > canvas.height) {
	                    return; // 撞墙不动
	                }
	                // 地图碰撞
	                let r = Math.floor(nextY / TILE_SIZE);
	                let c = Math.floor(nextX / TILE_SIZE);
	                let r2 = Math.floor((nextY + this.h - 1) / TILE_SIZE);
	                let c2 = Math.floor((nextX + this.w - 1) / TILE_SIZE);
	                // 简化的地图碰撞检测 (检查四个角)
	                let blocked = false;
	                for(let i=r; i<=r2; i++) {
	                    for(let j=c; j<=c2; j++) {
	                        if (i>=0 && i<ROWS && j>=0 && j<COLS) {
	                            let tile = map[i][j];
	                            if (tile === 1 || tile === 2 || tile === 4 || tile === 9) { // 砖,钢,水,老鹰
	                                blocked = true;
	                            }
	                        }
	                    }
	                }
	                // 坦克之间碰撞
	                let tempRect = new Rect(nextX, nextY, this.w, this.h);
	                for (let t of allTanks) {
	                    if (t !== this && tempRect.intersects(t)) {
	                        blocked = true;
	                        break;
	                    }
	                }
	                if (!blocked) {
	                    this.x = nextX;
	                    this.y = nextY;
	                } else {
	                    // 如果是敌方坦克，撞墙换向
	                    if (this.type === 'enemy') this.changeDirRandomly();
	                }
	            }
	            shoot() {
	                if (this.cooldown > 0) return;
	                bullets.push(new Bullet(this.x, this.y, this.dir, this.type));
	                this.cooldown = 30; // 冷却帧数
	            }
	            changeDirRandomly() {
	                let dirs = [0, 1, 2, 3];
	                // 稍微智能一点：50%概率随机，50%概率朝向基地或玩家(简化为随机)
	                this.dir = dirs[Math.floor(Math.random() * dirs.length)];
	            }
	        }
	        // 绘图函数
	        function drawMap() {
	            for (let r = 0; r < ROWS; r++) {
	                for (let c = 0; c < COLS; c++) {
	                    let tile = map[r][c];
	                    let x = c * TILE_SIZE;
	                    let y = r * TILE_SIZE;
	                    if (tile === 1) { // 砖
	                        ctx.fillStyle = "#a52a2a";
	                        ctx.fillRect(x+1, y+1, TILE_SIZE-2, TILE_SIZE-2);
	                        // 砖纹理
	                        ctx.fillStyle = "#800000";
	                        ctx.fillRect(x+4, y+4, TILE_SIZE-8, 2);
	                        ctx.fillRect(x+4, y+10, TILE_SIZE-8, 2);
	                    } else if (tile === 2) { // 钢
	                        ctx.fillStyle = "#c0c0c0";
	                        ctx.fillRect(x, y, TILE_SIZE, TILE_SIZE);
	                        ctx.fillStyle = "#fff";
	                        ctx.fillRect(x+4, y+4, 12, 12);
	                    } else if (tile === 4) { // 水
	                        ctx.fillStyle = "#0000ff";
	                        ctx.fillRect(x, y, TILE_SIZE, TILE_SIZE);
	                    } else if (tile === 9) { // 老鹰
	                        if (baseActive) {
	                            ctx.fillStyle = "#ccc"; // 基地背景
	                            ctx.fillRect(x, y, TILE_SIZE*2, TILE_SIZE*2); // 老鹰是2x2
	                            // 画个简单的鹰图案
	                            ctx.fillStyle = "#d32f2f";
	                            ctx.beginPath();
	                            ctx.moveTo(x+10, y+30);
	                            ctx.lineTo(x+30, y+30);
	                            ctx.lineTo(x+20, y+10);
	                            ctx.fill();
	                            ctx.fillStyle = "#ffeb3b";
	                            ctx.font = "12px Arial";
	                            ctx.fillText("★", x+13, y+25);
	                        } else {
	                            // 被毁坏
	                            ctx.fillStyle = "#333";
	                            ctx.fillRect(x, y, TILE_SIZE*2, TILE_SIZE*2);
	                            ctx.fillStyle = "#555";
	                            ctx.beginPath();
	                            ctx.arc(x+20, y+20, 15, 0, Math.PI*2);
	                            ctx.fill();
	                        }
	                    }
	                }
	            }
	        }
	        function createExplosion(x, y) {
	            // 简单的粒子效果
	            for(let i=0; i<8; i++) {
	                particles.push({
	                    x: x, y: y,
	                    vx: (Math.random() - 0.5) * 4,
	                    vy: (Math.random() - 0.5) * 4,
	                    life: 20
	                });
	            }
	        }
	        function drawParticles() {
	            for (let i = particles.length - 1; i >= 0; i--) {
	                let p = particles[i];
	                p.x += p.vx;
	                p.y += p.vy;
	                p.life--;
	                ctx.fillStyle = `rgba(255, 100, 0, ${p.life / 20})`;
	                ctx.fillRect(p.x, p.y, 4, 4);
	                if (p.life <= 0) particles.splice(i, 1);
	            }
	        }
	        // 输入处理
	        window.addEventListener("keydown", e => {
	            keys[e.key] = true;
	            keys[e.code] = true; // 兼容 Space
	        });
	        window.addEventListener("keyup", e => {
	            keys[e.key] = false;
	            keys[e.code] = false;
	        });
	        function resetGame() {
	            // 深拷贝地图
	            map = LEVEL_1_MAP.map(row => [...row]);
	            player = new Tank(9 * TILE_SIZE, 24 * TILE_SIZE, "#f0e68c", 'player');
	            enemies = [];
	            bullets = [];
	            particles = [];
	            lives = 3;
	            enemiesToSpawn = 20;
	            baseActive = true;
	            isGameOver = false;
	            livesDisplay.innerText = lives;
	            enemyDisplay.innerText = enemiesToSpawn;
	            spawnTimer = 0;
	        }
	        function startGame() {
	            startScreen.style.display = 'none';
	            resetGame();
	            if (gameInterval) clearInterval(gameInterval);
	            gameInterval = setInterval(gameLoop, 1000 / 60);
	        }
	        function gameOver(win) {
	            isGameOver = true;
	            clearInterval(gameInterval);
	            startScreen.style.display = 'flex';
	            startScreen.querySelector('h1').innerText = win ? "任务完成!" : "GAME OVER";
	            startScreen.querySelector('button').innerText = "重新开始";
	        }
	        function gameLoop() {
	            // 清屏
	            ctx.fillStyle = "#000";
	            ctx.fillRect(0, 0, canvas.width, canvas.height);
	            drawMap();
	            if (isGameOver) return;
	            // 玩家逻辑
	            let oldX = player.x, oldY = player.y;
	            if (keys["w"] || keys["ArrowUp"]) player.move(0, enemies.concat(player));
	            else if (keys["s"] || keys["ArrowDown"]) player.move(2, enemies.concat(player));
	            else if (keys["a"] || keys["ArrowLeft"]) player.move(3, enemies.concat(player));
	            else if (keys["d"] || keys["ArrowRight"]) player.move(1, enemies.concat(player));
	            if (keys[" "] || keys["Space"]) player.shoot();
	            if (player.cooldown > 0) player.cooldown--;
	            player.draw();
	            // 敌军生成
	            if (enemies.length < 4 && enemiesToSpawn > 0) {
	                spawnTimer++;
	                if (spawnTimer > 120) { // 约2秒生成一个
	                    // 3个出生点: 左上, 中上, 右上
	                    let spawns = [0, 12, 24];
	                    let sx = spawns[Math.floor(Math.random()*3)] * TILE_SIZE;
	                    // 检查出生点是否有坦克，防止重叠
	                    let clear = true;
	                    for(let e of enemies) {
	                        if (Math.abs(e.x - sx) < TILE_SIZE && Math.abs(e.y) < TILE_SIZE) clear = false;
	                    }
	                    if (clear) {
	                        enemies.push(new Tank(sx, 0, "#e0e0e0", 'enemy'));
	                        enemiesToSpawn--;
	                        enemyDisplay.innerText = enemiesToSpawn;
	                        spawnTimer = 0;
	                    }
	                }
	            } else if (enemiesToSpawn === 0 && enemies.length === 0 && baseActive) {
	                gameOver(true);
	            }
	            // 敌军逻辑
	            for (let i = enemies.length - 1; i >= 0; i--) {
	                let e = enemies[i];
	                // 简单AI: 移动
	                if (Math.random() < 0.02) e.changeDirRandomly();
	                e.move(e.dir, enemies.concat(player));
	                // 射击
	                if (Math.random() < 0.015) e.shoot();
	                if (e.cooldown > 0) e.cooldown--;
	                e.draw();
	                // 玩家与敌人碰撞 (同归于尽)
	                if (player.intersects(e)) {
	                    createExplosion(player.x, player.y);
	                    lives--;
	                    livesDisplay.innerText = lives;
	                    if (lives <= 0) {
	                        player.x = -100; // 移出屏幕
	                        gameOver(false);
	                    } else {
	                        // 重置玩家位置
	                        player.x = 9 * TILE_SIZE;
	                        player.y = 24 * TILE_SIZE;
	                        player.dir = 0;
	                    }
	                    createExplosion(e.x, e.y);
	                    enemies.splice(i, 1);
	                }
	            }
	            // 子弹逻辑
	            for (let i = bullets.length - 1; i >= 0; i--) {
	                let b = bullets[i];
	                let active = b.update();
	                b.draw();
	                if (!active) {
	                    bullets.splice(i, 1);
	                    continue;
	                }
	                // 子弹碰撞检测
	                // 1. 地图
	                let c = Math.floor((b.x + 3) / TILE_SIZE);
	                let r = Math.floor((b.y + 3) / TILE_SIZE);
	                if (r >= 0 && r < ROWS && c >= 0 && c < COLS) {
	                    let tile = map[r][c];
	                    if (tile === 1) { // 砖
	                        map[r][c] = 0; // 销毁
	                        createExplosion(b.x, b.y);
	                        bullets.splice(i, 1);
	                        continue;
	                    } else if (tile === 2) { // 钢
	                        createExplosion(b.x, b.y); // 声音/火花
	                        bullets.splice(i, 1);
	                        continue;
	                    } else if (tile === 9) { // 老鹰
	                        baseActive = false;
	                        createExplosion(b.x, b.y);
	                        // 强制刷新该块区域为爆炸状态
	                        map[r][c] = 0; // 虽然视觉上画了，但逻辑上变成空地，或者保持9但在drawMap里根据baseActive画
	                        bullets.splice(i, 1);
	                        gameOver(false);
	                        continue;
	                    }
	                }
	                // 2. 坦克
	                if (b.owner === 'player') {
	                    for (let j = enemies.length - 1; j >= 0; j--) {
	                        if (b.intersects(enemies[j])) {
	                            createExplosion(enemies[j].x, enemies[j].y);
	                            enemies.splice(j, 1);
	                            bullets.splice(i, 1);
	                            break;
	                        }
	                    }
	                } else {
	                    if (b.intersects(player)) {
	                        createExplosion(player.x, player.y);
	                        lives--;
	                        livesDisplay.innerText = lives;
	                        bullets.splice(i, 1);
	                        if (lives <= 0) {
	                            player.x = -100;
	                            gameOver(false);
	                        } else {
	                            player.x = 9 * TILE_SIZE;
	                            player.y = 24 * TILE_SIZE;
	                        }
	                    }
	                }
	            }
	            drawParticles();
	        }
	    </script>
	</body>
	</html>

</div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Jack</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/13/2026-02-13-woshipm/" title="woshipm">woshipm</a><time datetime="2026-02-13T09:20:00.000Z" title="发表于 2026-02-13 17:20:00">2026-02-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/13/2026-02-13-xiaobawang-game-console/" title="小霸王游戏机">小霸王游戏机</a><time datetime="2026-02-13T09:00:00.000Z" title="发表于 2026-02-13 17:00:00">2026-02-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/01/2026-01-01-multimodal-arena/" title="Multimodal Arena">Multimodal Arena</a><time datetime="2026-01-01T04:00:00.000Z" title="发表于 2026-01-01 12:00:00">2026-01-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/29/2025-12-29-life-compass/" title="Life Compass">Life Compass</a><time datetime="2025-12-29T11:00:00.000Z" title="发表于 2025-12-29 19:00:00">2025-12-29</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
          </div>
          <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%BD%9C%E8%80%85%E4%B8%93%E6%A0%8F/"><span class="card-category-list-name">作者专栏</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/"><span class="card-category-list-name">工具</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%B8%B8%E6%88%8F/"><span class="card-category-list-name">游戏</span><span class="card-category-list-count">1</span></a></li>
          </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/%E6%A8%A1%E5%9E%8B%E5%AF%B9%E6%AF%94/" style="font-size: 1.1em; color: #999">模型对比</a> <a href="/tags/%E8%87%AA%E6%88%91%E8%AF%84%E4%BC%B0/" style="font-size: 1.1em; color: #999">自我评估</a> <a href="/tags/%E5%B0%8F%E9%9C%B8%E7%8E%8B/" style="font-size: 1.1em; color: #999">小霸王</a> <a href="/tags/%E4%BA%BA%E7%94%9F%E8%A7%84%E5%88%92/" style="font-size: 1.1em; color: #999">人生规划</a> <a href="/tags/%E6%B8%B8%E6%88%8F%E5%90%88%E9%9B%86/" style="font-size: 1.1em; color: #999">游戏合集</a> <a href="/tags/%E5%A4%9A%E6%A8%A1%E6%80%81/" style="font-size: 1.1em; color: #999">多模态</a></div></div><div class="card-widget card-archives">
    <div class="item-headline">
      <i class="fas fa-archive"></i>
      <span>归档</span>
      
    </div>
  
    <ul class="card-archive-list">
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2026/02/">
            <span class="card-archive-list-date">
              二月 2026
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2026/01/">
            <span class="card-archive-list-date">
              一月 2026
            </span>
            <span class="card-archive-list-count">1</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/12/">
            <span class="card-archive-list-date">
              十二月 2025
            </span>
            <span class="card-archive-list-count">1</span>
          </a>
        </li>
      
    </ul>
  </div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站信息</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">4</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总浏览量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2026-02-13T10:06:58.860Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By Jack</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3"></script><script src="/js/main.js?v=5.5.3"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>